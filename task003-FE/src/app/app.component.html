<div class="container">
  <app-header></app-header>

  <div *ngIf="bases.length > 0" class="bases-container">
    <div *ngFor="let base of bases" class="base-item">
      <h3>{{ base.name }}</h3>
      <div class="actions">
        <button (click)="syncTickets(base.id)">Sync Tickets</button>
        <button (click)="onBaseSelect(base.id, base.name)">View Tickets</button>
      </div>
      <div *ngIf="selectedBaseId === base.id">
        <p *ngIf="syncStatus" class="sync-status">{{ syncStatus }}</p>
        <p *ngIf="error" class="error">{{ error }}</p>
      </div>
    </div>
  </div>

  <!-- Add debug info -->
  <div *ngIf="showTickets">
    <p>Debug: Number of tickets: {{ tickets.length }}</p>
    <p>Selected Base ID: {{ selectedBaseId }}</p>
  </div>

  <!-- Only show tickets component when we have data -->
  <app-tickets
    *ngIf="showTickets && tickets && tickets.length > 0"
    [tickets]="tickets"
    [baseName]="selectedBaseName"
    [baseId]="selectedBaseId"
    [pagination]="ticketsPagination"
  >
  </app-tickets>
</div>
